import{precacheAndRoute}from"workbox-precaching";import{registerRoute}from"workbox-routing";import{CacheableResponsePlugin}from"workbox-cacheable-response";import{NetworkFirst,CacheFirst,StaleWhileRevalidate}from"workbox-strategies";import CONFIG from"./config";const manifest=self.__WB_MANIFEST;precacheAndRoute(manifest),registerRoute(({url:e})=>"https://fonts.googleapis.com"===e.origin||"https://fonts.gstatic.com"===e.origin,new CacheFirst({cacheName:"google-fonts"})),registerRoute(({url:e})=>"https://cdnjs.cloudflare.com"===e.origin||e.origin.includes("fontawesome"),new CacheFirst({cacheName:"fontawesome"})),registerRoute(({url:e})=>"https://ui-avatars.com"===e.origin,new CacheFirst({cacheName:"avatars-api",plugins:[new CacheableResponsePlugin({statuses:[0,200]})]})),registerRoute(({request:e,url:i})=>new URL(CONFIG.BASE_URL).origin===i.origin&&"image"!==e.destination,new NetworkFirst({cacheName:"storyapp-api"})),registerRoute(({request:e,url:i})=>new URL(CONFIG.BASE_URL).origin===i.origin&&"image"===e.destination,new StaleWhileRevalidate({cacheName:"storyapp-api-images"})),registerRoute(({url:e})=>e.origin.includes("maptiler"),new CacheFirst({cacheName:"maptiler-api"})),self.addEventListener("push",e=>{console.log("Service worker pushing..."),e.waitUntil(async function(){await self.registration.showNotification("Ada laporan baru untuk Anda!",{body:"Terjadi kerusakan lampu jalan di Jl. Melati"})}())});